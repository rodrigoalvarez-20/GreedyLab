/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.8
*/
zingchart.setModule("sunburst"),function(){var e={},t={},a={},r={},l={},i={},n={};zingchart.bind(null,"dataparse",function(o,d){var s,p,h,u,v,c,g,f,x,_=zingchart.getLoader(o.id);for(n[o.id]?n[o.id]!==_.I+"/"+_.F&&(d=JSON.parse(_.E.source)):n[o.id]=_.I+"/"+_.F,u=0,v=d.graphset.length;u<v;u++)if(d.graphset[u].type&&"sunburst"===d.graphset[u].type){e[o.id]=!0,r[o.id]||(r[o.id]={}),l[o.id]||(l[o.id]=-1),i[o.id]=[],t[o.id]||(t[o.id]=JSON.stringify(d));var b=d.graphset[u].type;d.graphset[u]["plugin-type"]=b;var z=d.graphset[u];zingchart.normalize(z),z.type="pie";var C=zingchart.getGraphInfo(_,d,u),y={};z.options&&(y=z.options[b]||z.options),ZC._todash_(y);var Z=y.root||"";a[o.id]=Z;var m=ZC._i_(y.slice||"0"),A=ZC._f_(y["size-factor"]||"0.95"),w=ZC._i_(y.space||"0"),k=y.widths||[],F=y.palette||["#6A921F","#007FA3","#A62B02","#B79007","#563D02","#0B32A0","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],B=y["text-attr"]||"text",D=y["value-attr"]||"value";if(z.series=z.series||[],!(z.series instanceof Array)){var E=[],O={},J=function(e,t){var a=(e.text||e.name||e[B]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");O[a]?a+=O[a]++:O[a]=1;var r={id:a,text:e.text||e.name||e[B]||a,value:e.value||e.size||e[D],parent:t||""};if(E.push(r),e.children)for(var l=0;l<e.children.length;l++)J(e.children[l],a)};J(z.series,""),z.series=E}for(var N,I={},L=[].concat(z.series).reverse(),M=0,S=L.length,T=0;L.length&&S-- >=0;)for(s=L.length-1;s>=0;s--)for(N in c=(g=L[s]).id||"id"+M++,""===(x=g.parent||"")?(I[c]={id:c,level:0,parent:"",text:g.text||g.name||g[B]||c,value:g.value||g.size||g[D],children:[]},i[o.id].push(c),L.splice(s,1)):I[x]&&(I[x].children.push(c),I[c]={id:c,level:I[x].level+1,parent:x,text:g.text||g.name||g[B]||c,value:g.value||g.size||g[D],children:[]},L.splice(s,1),T=Math.max(T,I[c].level)),g)0===N.indexOf("data-")&&(I[c][N]=g[N]);var V=function(e,t){return t=t||[],I[e]&&""!==I[e].parent&&(t.push(I[e].parent),t=t.concat(V(I[e].parent))),t};if(""!==Z){for(c in I)c!==Z?(f=V(c),-1===ZC.AV(f,Z)&&delete I[c]):(I[c]["up-parent"]=I[c].parent,I[c].parent="");var j=I[Z].level;for(c in I)I[c].level-=j;T-=j}var G=0,P=0;for(h=0;h<=T;h++){if(0===h)for(c in I)0===I[c].level&&P++;for(c in I){var K="";r[o.id][c]?K=r[o.id][c]:(I[c].level===h&&(K=0===I[c].level||1===I[c].level&&1===P?F[G++%F.length]:I[I[c].parent].color),r[o.id][c]=K),I[c].color=K}}var Q=function(e){if(I[e]){if(null===ZC._n_(I[e].value))if(0===I[e].children.length)I[e].value=0;else{for(var t=0,a=0;a<I[e].children.length;a++)t+=Q(I[e].children[a]);I[e].value=t}return parseFloat(I[e].value)}};for(c in I)I[c].value=Q(c);if(-1===l[o.id]){for(c in I)if(0!==I[c].level&&(1!==I[c].level||1!==P)&&r[o.id][c]){f=V(c);var U=1===P?f[f.length-2]:f[f.length-1],q=1-I[c].value/I[U].value;r[o.id][c]=I[c].color=ZC.AP.QU(I[c].color,40*q)}l[o.id]=1}var H=[],R=0;for(h=0;h<=T;h++){if(H[h]){var W=[];for(s=0;s<H[h].length;s++){var X=(g=I[H[h][s]]).children,Y=0;for(p=0;p<X.length;p++)W.push(X[p]),Y+=I[X[p]].value;if(Y<g.value){var $="sbfakeid"+R++;I[$]={id:$,parent:g.id,value:g.value-Y,level:g.level,children:[],fake:!0,color:g.color},W.push($)}}H[h]=[].concat(W)}else for(c in H[h]=[],I)I[c].level===h&&H[h].push(c);h<T&&(H[h+1]=[].concat(H[h]))}d.graphset.splice(u,1);var ee={};ZC._cp_(z,ee),delete ee.options,delete ee.series,delete ee["no-data"],ee["background-color"]="none",ee.x=C.graph.x,ee.y=C.graph.y,ee.width=C.graph.width,ee.height=C.graph.height,ee.plot=ee.plot||{},ee.plot["value-box"]=ee.plot["value-box"]||{},ee.plot["value-box"].placement=ee.plot["value-box"].placement||"radial",ee.plot.detach=!1;for(var te=["plotarea","legend","title","subtitle","source"],ae=0;ae<te.length;ae++)ee[te[ae]]&&delete ee[te[ae]]["adjust-layout"];var re=A*(Math.min(C.plotarea.width,C.plotarea.height)/2-m-T*w),le=ZC._i_(re/(T+1));for(h=0;h<=T;h++){var ie={};if(ZC._cp_(ee,ie),h>0&&(delete ie.title,delete ie.subtitle,delete ie.source,delete ie.legend,delete ie["no-data"]),ie.id=_.K+h,0===k.length)ie.plot.size=m+le*(h+1)+w*h,ie.plot.slice=m+le*h+w*h;else{for(var ne=0,oe=0;oe<h;oe++)ne+=k[oe]||le;ie.plot.slice=m+ne+w*h,ne+=k[h]||le,ie.plot.size=m+ne+w*h}ie.series=[];var de=-1;for(s=0;s<H[h].length;s++){var se=I[H[h][s]].text,pe=se,he=I[H[h][s]].id;for(N in x=I[H[h][s]]["up-parent"]||I[H[h][s]].parent,0===h&&(""!==x||1===P&&i[o.id].length>1&&-1!==ZC.AV(i[o.id],he))&&(pe="\u25b2 "+pe),g={"data-l0items":P,"data-parent":x,"data-uid":he,"data-level":I[H[h][s]].level,"data-vbtext":pe,text:se,values:[I[H[h][s]].value],"background-color":I[H[h][s]].color,"hover-state":{"background-color":ZC.AP.JN(I[H[h][s]].color,20)}},I[H[h][s]])0===N.indexOf("data-")&&(g[N]=I[H[h][s]][N]);I[H[h][s]].fake&&(g.visible=!1),I[H[h][s]].fake?-1===de?(ie.series.push(g),de=ie.series.length-1):ie.series[de].values[0]+=g.values[0]:(de=-1,ie.series.push(g))}d.graphset.splice(u,0,ie)}var ue={};ZC._cp_(z,ue),delete ue.options,delete ue.series,delete ue["no-data"],ue.type="pie";for(te=["plotarea","legend","title","subtitle","source"],ae=0;ae<te.length;ae++)ue[te[ae]]&&delete ue[te[ae]]["adjust-layout"];ue.x=C.graph.x,ue.y=C.graph.y,ue.width=C.graph.width,ue.height=C.graph.height,d.graphset.splice(u,0,ue)}return d});var o=null;zingchart.bind(null,"node_click",function(e){if("touchend"===e.ev.type){if(null===o)return void(o=(new Date).getTime());if((new Date).getTime()-o>=300)return void(o=(new Date).getTime());o=null}else if(0!==e.ev.button)return;var r=zingchart.getLoader(e.id);if(r){var l=zingchart.getGraph(r,e.graphid);if(l&&"sunburst"===l.o["plugin-type"]){var n=JSON.parse(t[e.id]);n.graphset[0].options=n.graphset[0].options||{},null!==ZC._n_(n.graphset[0].options.flat)&&ZC._b_(n.graphset[0].options.flat)||(""!==e["data-parent"]||e["data-l0items"]>1||i[e.id].length>1&&-1!==ZC.AV(i[e.id],e["data-uid"]))&&(a[e.id]===e["data-uid"]?n.graphset[0].options.root=e["data-parent"]:n.graphset[0].options.root=e["data-uid"],zingchart.exec(e.id,"setdata",{data:n}))}}});zingchart.bind(null,"destroy",function(o){e[o.id]&&(delete e[o.id],delete n[o.id],t={},a={},r={},l={},i={})})}();